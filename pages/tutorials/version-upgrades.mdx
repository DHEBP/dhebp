---
title: "TELA Version Upgrades & Changes | Managing Application Updates"
description: "Guide to upgrading TELA applications, handling breaking changes, and managing version compatibility. Complete strategy for immutable smart contract updates."
keywords: "TELA upgrades, version management, TELA updates, breaking changes, DERO updates, smart contract upgrades, version control"
date: "2025-01-12"
lastUpdated: "2025-10-22"
authors: ["DHEBP"]
image: "/assets/tutorials/version-upgrades.png"
slug: "tutorials/version-upgrades"
canonicalUrl: "https://tela.derod.org/tutorials/version-upgrades"
tags: ["tutorial", "upgrades", "versioning", "updates", "TELA"]
---

import { Callout } from 'nextra/components';
import { Card, Cards } from 'nextra/components';

# TELA Version Upgrades & Changes

Complete guide to upgrading TELA applications, managing versions, and handling breaking changes across the DERO ecosystem.

<Callout emoji="‚¨ÜÔ∏è">
  **Update Strategy**: TELA's immutable smart contract system means "upgrading" creates new versions while preserving all historical states on the blockchain.
</Callout>

## What You'll Learn

This tutorial covers TELA version management:
- ‚úÖ Understanding TELA's commit-based versioning
- ‚úÖ Updating INDEX manifests and DOC files
- ‚úÖ Accessing historical versions via commit TXIDs
- ‚úÖ Handling breaking changes in DERO, TELA-CLI, and XSWD
- ‚úÖ Rolling back to previous versions

**Estimated Time:** 30-45 minutes

**Experience Level:** Intermediate (requires TELA deployment experience)

## Understanding TELA Versioning

### Version System

TELA applications use a commit-based versioning system:

```
TELA-INDEX-1 (Mutable)
‚îú‚îÄ‚îÄ Initial Deploy: SCID (permanent identifier)
‚îú‚îÄ‚îÄ Update 1: TXID_1 (first update transaction)
‚îú‚îÄ‚îÄ Update 2: TXID_2 (second update transaction)
‚îî‚îÄ‚îÄ Update N: TXID_N (latest version)

TELA-DOC-1 (Immutable)
‚îî‚îÄ‚îÄ Single deployment: SCID (never changes)
```

**Key Concepts:**
- **SCID**: Smart Contract ID - permanent identifier (never changes)
- **TXID**: Transaction ID - identifies specific version/update
- **TELA-INDEX-1**: Updateable manifest (mutable, **if deployed with ringsize 2**)
- **TELA-DOC-1**: Immutable files (permanent, cannot be changed)

<Callout type="warning" emoji="üîí">
**Immutability Rule:** INDEX contracts deployed with ringsize greater than 2 (anonymous deployment) are **permanently immutable** and cannot be updated. Only ringsize 2 (public deployment) allows the owner to update the contract.
</Callout>

### How Version Tracking Works

TELA-INDEX-1 smart contracts track updates using blockchain variables:

```go
// From TELA-INDEX-1.bas smart contract:

// Initial deployment (init function):
STORE("commit", 0)           // Commit counter starts at 0
STORE(0, HEX(TXID()))       // Store initial TXID at key "0"
STORE("hash", HEX(TXID()))  // Current hash

// Each update (UpdateCode function):
STORE("commit", LOAD("commit")+1)      // Increment: 0‚Üí1, 1‚Üí2, 2‚Üí3...
STORE(LOAD("commit"), HEX(TXID()))     // Store update TXID at key "1", "2", "3"...
STORE("hash", HEX(TXID()))             // Update current hash
```

**Reading Version History:**
```bash
¬ª search scid vars YOUR_INDEX_SCID
# Returns:
# {"commit", "3"}        ‚Üê 3 updates have been made
# {"0", "abc123..."}     ‚Üê Initial deployment TXID
# {"1", "def456..."}     ‚Üê First update TXID
# {"2", "ghi789..."}     ‚Üê Second update TXID  
# {"3", "jkl012..."}     ‚Üê Third update TXID (latest)
# {"hash", "jkl012..."}  ‚Üê Current/latest commit hash
```

### Version Tracking

```bash
# Serve current/latest version
¬ª serve YOUR_SCID

# Clone current version to local files
¬ª clone YOUR_SCID

# Clone specific version/commit
¬ª clone YOUR_SCID@COMMIT_TXID

# View version history and commit hashes
¬ª search scid vars YOUR_SCID
# Look for: "commit" (number of updates), "0", "1", "2"... (commit TXIDs), "hash" (latest)
```

<Callout type="info">
**Version Access:** TELA-CLI's `clone` command with `@txid` syntax is how you access specific versions. The `serve` command always serves the latest version (or blocks updates if `updates false` is set).
</Callout>

### TELA-CLI Updates Setting

TELA-CLI has a critical setting that controls whether updated content can be accessed:

```bash
# Check current setting
¬ª info
# Look for: "Updated content allowed: true/false"

# Allow serving/cloning updated content
¬ª updates true

# Block serving/cloning updated content (safety mode)
¬ª updates false
```

**Why This Matters:**
- **Security**: If `updates false`, TELA-CLI will refuse to serve/clone any INDEX that has been updated since you first accessed it
- **Safety**: Protects you from serving malicious updates without your knowledge
- **Testing**: Set `updates true` when intentionally testing new versions
- **Default**: `updates false` for security

**Example Error:**
```bash
¬ª clone abc123...
ERROR: user defined no updates and content has been updated
# Solution: ¬ª updates true (if you trust the update)
```

## Upgrade Scenarios

### Scenario 1: Update Application Content

**When to Use:**
- Bug fixes in your application
- New features or UI improvements
- Content updates
- Performance optimizations

**Process:**

```bash
# Step 1: Clone current version
¬ª clone YOUR_INDEX_SCID
# Files saved to datashards/clone/<dURL>/

# Step 2: Modify files
# Navigate to cloned directory and edit files
# Example: datashards/clone/myapp.tela/index.html

# Step 3: Deploy updated DOC
¬ª install-doc
Enter DOC file path ¬ª datashards/clone/myapp.tela/index.html
Enter DOC description ¬ª Updated version with bug fixes
Enter DOC icon ¬ª (leave empty or add icon URL)
Enter DOC dURL ¬ª myapp.tela
Enter DOC subDir ¬ª (leave empty)
Compress file data (y/n) ¬ª y
Enter DOC install ringsize ¬ª 2
# TELA-CLI returns: DOC install TXID: abc123...
# This TXID is your new DOC_SCID

# Step 4: Update INDEX with new DOC
¬ª update-index YOUR_INDEX_SCID
Confirm password ¬ª ****
How many total documents are embedded in this INDEX? ¬ª 1
Enter DOC1 SCID ¬ª abc123...  # TXID from step 3
Add SC TELA-MODs (y/n) ¬ª n
Confirm INDEX update (y/n) ¬ª y
# TELA-CLI returns: INDEX update TXID: def456...

# Step 5: Verify update
¬ª updates true  # Allow serving updated content
¬ª serve YOUR_INDEX_SCID  # Serves latest version
```

### Scenario 2: Add New Files

**When to Use:**
- Adding new pages or modules
- Expanding application functionality
- Adding new resources

**Process:**

```bash
# Step 1: Deploy new DOC contracts
¬ª install-doc
Enter DOC file path ¬ª /path/to/new-feature.js
Enter DOC description ¬ª New feature module
Enter DOC icon ¬ª 
Enter DOC dURL ¬ª myapp.tela
Enter DOC subDir ¬ª 
Compress file data (y/n) ¬ª y
Enter DOC install ringsize ¬ª 2
# TELA-CLI returns: DOC install TXID: xyz789...

# Step 2: Update INDEX to include new DOC
¬ª update-index YOUR_INDEX_SCID
Confirm password ¬ª ****
How many total documents are embedded in this INDEX? ¬ª 3  # Increased from 2
Enter DOC1 SCID ¬ª abc123...  # Existing DOC 1
# File: index.html
# Author: deto1qy...
Enter DOC2 SCID ¬ª def456...  # Existing DOC 2
# File: style.css
# Author: deto1qy...
Enter DOC3 SCID ¬ª xyz789...  # New DOC from step 1
# File: new-feature.js
# Author: deto1qy...
Add SC TELA-MODs (y/n) ¬ª n
Confirm INDEX update (y/n) ¬ª y
# TELA-CLI returns: INDEX update TXID: new_txid...

# INDEX now references 3 DOCs
```

**Pro Tip:** TELA-CLI shows you the file name and author for each DOC SCID you enter, helping you verify you're adding the correct files.

### Scenario 3: Remove Deprecated Files

**When to Use:**
- Removing unused code or assets
- Simplifying application structure
- Deprecating old features

**Process:**

```bash
# Simply omit deprecated DOC from INDEX update
¬ª update-index YOUR_INDEX_SCID
Confirm password ¬ª ****
How many total documents are embedded in this INDEX? ¬ª 2  # Reduced from 3
Enter DOC1 SCID ¬ª abc123...  # Keep this one
# File: index.html
Enter DOC2 SCID ¬ª def456...  # Keep this one
# File: style.css
# DOC3 (xyz789...) is no longer referenced
Add SC TELA-MODs (y/n) ¬ª n
Confirm INDEX update (y/n) ¬ª y
```

<Callout type="info">
**Important:** The removed DOC smart contract still exists on the blockchain and can be accessed by its SCID. It's just no longer referenced by your INDEX. This is how TELA maintains permanent history!
</Callout>

### Scenario 4: Update Metadata Only

**When to Use:**
- Change application name or description  
- Update icon URL
- Add/modify TELA-MODs

**Process:**

```bash
¬ª update-index YOUR_INDEX_SCID
Confirm password ¬ª ****
How many total documents are embedded in this INDEX? ¬ª 2  # Keep same count
Enter DOC1 SCID ¬ª abc123...  # Same DOCs as before
Enter DOC2 SCID ¬ª def456...  # No code changes
Add SC TELA-MODs (y/n) ¬ª y  # To modify MODs
# Follow MOD prompts...
Confirm INDEX update (y/n) ¬ª y
```

<Callout type="warning">
**Metadata via TELA-MODs:** To update `name`, `description`, or `icon` after deployment, you need to:
1. Deploy INDEX with TELA-MOD-1 (variable store MOD like `vsoo`)
2. Use `set-var` command to update `var_header_name`, `var_header_description`, or `var_header_icon`

Metadata set during `InitializePrivate()` cannot be changed without redeploying!
</Callout>

**Update Individual Headers:**
```bash
# Set var_header_name (requires vsoo or similar MOD)
¬ª set-var YOUR_INDEX_SCID
Enter key to store ¬ª header_name
Enter value for key "header_name" ¬ª New App Name v2.0

# Update icon
¬ª set-var YOUR_INDEX_SCID  
Enter key to store ¬ª header_icon
Enter value for key "header_icon" ¬ª https://new-icon.url
```

## Breaking Changes

### DERO Network Updates

#### Blockchain Protocol Changes

**Impact**: Changes to DERO core consensus or RPC methods

**Example: New RPC Method Signature**
```javascript
// Before (old version)
xswd.call('DERO.GetInfo')  // Returns basic info

// After (updated version)
xswd.call('DERO.GetInfo')  // Returns extended info with new fields
```

**Handling:**
```javascript
// Defensive programming for version compatibility
async function getNetworkInfo() {
    try {
        const info = await xswd.call('DERO.GetInfo');
        
        // Check for new fields before using
        const height = info.height || info.topoheight || 0;
        const difficulty = info.difficulty || 0;
        
        // Use optional chaining for safety
        const miners = info.network_active_miners ?? 'N/A';
        
        return { height, difficulty, miners };
    } catch (error) {
        console.error('GetInfo failed:', error);
        return null;
    }
}
```

#### Smart Contract Changes

**Impact**: Changes to TELA standard contracts

**Example: TELA-MOD-1 Update**
```go
// Old MOD
Function SetVar(key String, value String) ...

// New MOD (with validation)
Function SetVar(key String, value String, signature String) ...
```

**Handling:**
```javascript
// Check MOD version before calling
async function setVariable(scid, key, value) {
    const scInfo = await xswd.call('DERO.GetSC', [{
        scid: scid,
        code: true,
        variables: false
    }]);
    
    // Check if signature parameter exists in smart contract code
    const needsSignature = scInfo.code.includes('signature String');
    
    const sc_rpc = [
        { name: "entrypoint", datatype: "S", value: "SetVar" },
        { name: "k", datatype: "S", value: key },
        { name: "v", datatype: "S", value: value }
    ];
    
    if (needsSignature) {
        sc_rpc.push({ name: "signature", datatype: "S", value: generateSig() });
    }
    
    return await xswd.call('sctransfer', [{
        scid: scid,
        sc_rpc: sc_rpc,
        ringsize: 2
    }]);
}
```

**Note:** TELA-MOD-1 SetVar uses parameters `k` and `v`, not `key` and `value`.

### XSWD Protocol Updates

#### Connection Changes

<Callout type="info">
For production XSWD implementations, use [XSWD Super Core](/templates/xswd-super-core) or [XSWD Minimal](/templates/xswd-minimal) which handle version compatibility automatically.
</Callout>

**XSWD Handshake Format (Current)**
```javascript
// Application data sent on connection
const applicationData = {
    id: "unique-app-id-" + Date.now(),
    name: "Your Application Name",
    description: "App description",
    url: "http://localhost:" + location.port  // Must match origin
};

// Connection flow
const socket = new WebSocket("ws://127.0.0.1:44326/xswd");
socket.addEventListener("open", (event) => {
    socket.send(JSON.stringify(applicationData));
});

socket.addEventListener("message", (event) => {
    const response = JSON.parse(event.data);
    if (response.accepted) {
        // Connection accepted, can make RPC calls
        console.log("XSWD connected:", response.message);
    }
});
```

**Version Compatibility:** XSWD handshake format has been stable since initial release. Always verify against [DERO source](https://github.com/deroproject/derohe/tree/main/walletapi/xswd) for latest specifications.

### TELA-CLI Updates

#### Command Changes

**Example: install-doc Parameter Updates**
```bash
# Old version
¬ª install-doc
Enter DOC file path ¬ª /path/to/file.html
Enter DOC description ¬ª Description
# Fixed compression behavior

# New version
¬ª install-doc
Enter DOC file path ¬ª /path/to/file.html
Enter DOC description ¬ª Description
Compress file data (y/n) ¬ª y  # New prompt
Enter compression level (1-9) ¬ª 6  # New option
```

**Handling:**
```bash
# Check TELA-CLI version
./tela-cli --version

# Read changelog before updating
cat CHANGELOG.md

# Test on testnet before mainnet
./tela-cli --daemon=127.0.0.1:40402
```

## Checking Compatibility

<Callout type="warning">
**Always test on testnet first!** Version updates can introduce breaking changes. Verify compatibility before mainnet deployment.
</Callout>

Check version compatibility before deploying:

```bash
# Check TELA package version (in Go package)
# See: https://github.com/civilware/tela/blob/main/tela.go
# Current: v1.0.0

# Check TELA-CLI available commands
./tela-cli
¬ª help

# Check your INDEX smart contract version
¬ª search scid vars YOUR_SCID
# Look for "telaVersion" variable (current: "1.1.0")

# Check DERO daemon version
# In derod terminal: version
# Or via XSWD: xswd.call('DERO.GetInfo')

# Read changelogs before updating
# TELA: https://github.com/civilware/tela/blob/main/CHANGELOG.md
# DERO: https://github.com/deroproject/derohe/blob/main/Changelog.md
```

**Current Versions (as of documentation):**
- **TELA Package:** v1.0.0
- **TELA-INDEX-1:** v1.1.0 (supports TELA-MOD-1)
- **TELA-DOC-1:** v1.0.0

## Migration Checklist

### Before Upgrading

- [ ] **Backup current version**
  - Save all SCIDs and TXIDs
  - Export application files
  - Document current functionality

- [ ] **Review changelog**
  - Read DERO release notes
  - Check TELA-CLI changelog
  - Review XSWD updates

- [ ] **Test on testnet**
  - Deploy updates to testnet first
  - Verify all functionality
  - Check performance

- [ ] **Update dependencies**
  - Update TELA-CLI to latest
  - Sync DERO daemon
  - Update wallet software

### During Upgrade

- [ ] **Deploy incrementally**
  - Update one DOC at a time
  - Test after each update
  - Monitor for errors

- [ ] **Maintain backward compatibility**
  - Keep old versions accessible
  - Support multiple API versions if needed
  - Provide migration path for users

- [ ] **Document changes**
  - Note new SCID/TXID pairs
  - Update user documentation
  - Communicate changes to users

### After Upgrade

- [ ] **Verify functionality**
  - Test all features
  - Check XSWD connectivity
  - Validate blockchain calls

- [ ] **Monitor performance**
  - Check load times
  - Verify data accuracy
  - Monitor error rates

- [ ] **Update documentation**
  - Update README
  - Revise user guides
  - Update API documentation

## Rollback Procedures

### Reverting to Previous Version

<Callout type="info">
**How to Access Historical Versions:** Use `clone <scid>@<txid>` to download specific commits. The `serve` command only serves the latest version.
</Callout>

```bash
# Step 1: Find the commit TXID you want to revert to
¬ª search scid vars YOUR_SCID
# Look for numeric keys (0, 1, 2...) showing commit TXIDs
# Example output: {"commit", "3"}, {"0", "txid0"}, {"1", "txid1"}, {"2", "txid2"}, {"3", "txid3"}

# Step 2: Clone that specific version
¬ª clone YOUR_SCID@PREVIOUS_TXID
# Files saved to datashards/clone/<dURL>/

# Step 3: Verify the cloned version is correct
# Check files in datashards/clone/<dURL>/

# Step 4: Re-deploy as new version (creates rollback)
# Deploy the old DOCs again
¬ª install-doc datashards/clone/<dURL>/index.html
# Get new DOC_SCID

# Update INDEX to point to "old" DOCs (now with new SCIDs)
¬ª update-index YOUR_SCID
# Enter the new DOC SCIDs from re-deployment
```

**Result:** Your INDEX now points to the old code, effectively rolling back while maintaining blockchain history.

### Emergency Rollback

```javascript
// Application-level version checking
const MINIMUM_VERSION = {
    dero: '5.2.0',
    xswd: 'v2'
};

async function checkCompatibility() {
    const info = await xswd.call('DERO.GetInfo');
    
    if (!info || !info.version) {
        alert('Unable to verify DERO version. Please update your daemon.');
        return false;
    }
    
    if (compareVersions(info.version, MINIMUM_VERSION.dero) < 0) {
        alert(`This application requires DERO ${MINIMUM_VERSION.dero}+`);
        return false;
    }
    
    return true;
}

// Show compatibility warning
window.addEventListener('load', async () => {
    const compatible = await checkCompatibility();
    if (!compatible) {
        document.body.innerHTML = '<h1>Upgrade Required</h1>';
    }
});
```

## Best Practices

### 1. Semantic Versioning in Metadata

```bash
# Use version in INDEX name
¬ª update-index
Enter INDEX name ¬ª MyApp v2.1.0
Enter INDEX description ¬ª Added feature X (v2.1.0)
```

### 2. Changelog in Application

```html
<!-- Embed changelog in about section -->
<div id="changelog">
    <h3>Version History</h3>
    <ul>
        <li><strong>v2.1.0</strong> - Added dark mode</li>
        <li><strong>v2.0.0</strong> - Major redesign</li>
        <li><strong>v1.0.0</strong> - Initial release</li>
    </ul>
</div>
```

### 3. Version Detection

```javascript
// Detect and display current version
const APP_VERSION = '2.1.0';
const DEPLOY_SCID = 'your-scid-here';

async function displayVersion() {
    try {
        const scInfo = await xswd.call('DERO.GetSC', [{
            scid: DEPLOY_SCID,
            variables: true,
            code: false
        }]);
        
        // TELA-INDEX stores commit count in "commit" variable
        // Commit TXIDs are stored as numeric keys: 0, 1, 2, 3...
        const commitCount = scInfo.valuesstring?.commit || 
                           scInfo.variablestringkeys?.commit || 0;
        
        document.getElementById('version').textContent = 
            `v${APP_VERSION} (${commitCount} updates)`;
    } catch (error) {
        console.error('Failed to get version:', error);
        document.getElementById('version').textContent = `v${APP_VERSION}`;
    }
}
```

**How TELA Tracks Versions:**
- `commit` variable = Total number of updates (starts at 0)
- Numeric keys (`0`, `1`, `2`, etc.) = TXID hash of each commit
- `hash` variable = TXID of most recent update

### 4. Graceful Degradation

```javascript
// Support multiple DERO versions
async function getBlockHeader(height) {
    try {
        // Try new method first
        return await xswd.call('DERO.GetBlockHeaderByHeight', [height]);
    } catch (e) {
        // Fallback to old method
        try {
            const block = await xswd.call('DERO.GetBlock', [height]);
            return block.block_header;
        } catch (e2) {
            console.error('Failed to get block header:', e2);
            return null;
        }
    }
}

// Defensive error handling for version compatibility
async function safeXSWDCall(method, params) {
    try {
        return await xswd.call(method, params);
    } catch (error) {
        console.warn(`${method} failed, may need update:`, error.message);
        return null;
    }
}
```

## Resources

<Cards>
  <Card title="TELA Changelog" href="https://github.com/civilware/tela/blob/main/CHANGELOG.md">
    Latest TELA updates
  </Card>
  <Card title="DERO Changelog" href="https://github.com/deroproject/derohe/blob/main/Changelog.md">
    DERO core changes
  </Card>
  <Card title="Migration Guide" href="/tutorials/migration-from-web">
    Convert existing apps
  </Card>
  <Card title="Error Troubleshooting" href="/error-troubleshooting">
    Fix upgrade issues
  </Card>
</Cards>

## Getting Help

Upgrade issues? Get support:

- **Discord**: [Join community](https://discord.gg/H95TJDp)
- **Forum**: [Post questions](https://forum.dero.io)
- **GitHub**: [Report bugs](https://github.com/civilware/tela/issues)

<Callout type="info">
  **Pro Tip**: Always test upgrades on testnet first. The blockchain is permanent - you can't undo a mainnet deployment!
</Callout>

## Next Steps

<Callout type="success" emoji="üéì">
**Version Management Mastered!** You now understand how to safely update and maintain TELA applications on the blockchain.
</Callout>

After mastering version management:

- **TELA Deployment**: Read [Deployment Guide](/deployment-guide) for production best practices
- **Advanced Features**: Explore [DocShards](/advanced-features/docshards) for handling large applications
- **Security**: Review [Security Model](/tela/tela-security-model) to understand immutability guarantees
- **Community**: Share your experience in [Discord](https://discord.gg/H95TJDp) or [Forum](https://forum.dero.io)

**Remember:** Every update creates permanent blockchain history. Test thoroughly on testnet before mainnet deployment!

